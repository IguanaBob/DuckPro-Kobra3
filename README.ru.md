# Duck Pro CFW

Первая кастомная прошивка, которая действительно необходима для Kobra 3.

:en: [English Readme](./README.md)

## Особенности (упрощённо)

- Веб-интерфейс (Mainsail/Fluidd):
  - Посылайте файлы на печать напрямую из Prusa/Orca Slicer;
  - Полный контроль над Kobra 3 с компьютера или телефона;
  - Просматривайте и контролируйте карты высот стола;
  - Меняйте конфигурацию принтера;
  - и т.д.
- Убраны некоторые трюки в printer.cfg, например, связанные с калибровкой Input Shaping;
- SSH доступ (user: `root`, pass: `rockchip`);
- ADB доступ (port: `5555`).

## Установка

### Версии до 2.3.2.9

:warning: Все действия вы делаете на свой страх и риск. Автор прошивки не несёт ответственности за любые последствия её установки :warning:

1. Скачайте последнюю версию со страницы [Релизы](https://github.com/utkabobr/DuckPro-Kobra3/releases/latest);
2. Распакуйте содержимое архива на USB-флешку, отформацтированную в FAT32 (Не удаляйте и не переименовывайте ничего);
3. Переименуйте каталог `aGVscF9zb3Nf` в `update`;
4. Вставьте USB флешку в принтер;
5. Настройки => Об оборудовании => Принтер => Версия прошивки (Не IP адрес!);
6. Должна быть оранжевая кнопка. Нажмите её и дождитесь установки прошивки.

### Версии начиная с 2.3.2.9

:warning: Все действия вы делаете на свой страх и риск. Автор прошивки не несёт ответственности за любые последствия её установки :warning:

1. Скачайте последнюю версию со страницы [Релизы](https://github.com/utkabobr/DuckPro-Kobra3/releases/latest);
2. Распакуйте содержимое архива на USB-флешку, отформацтированную в FAT32 (Не удаляйте и не переименовывайте ничего);
3. Вставьте флешку в принтер. Установка начнётся самостоятельно, при этом на экране ничего не будет отображаться, но будет играть музыка. Дождитесь пока принтер не перезагрузится (может занять несколько минут).

:warning: Не вынимайте флешку до того, как принтер перезагрузится сам!

## ЧАВО

**Вопрос**: Как подключиться к веб-интерфейсу?<br>
**Answer**: Просто откройте IP адрес принтера в браузере с любого устройства, находящегося в той же локальной сети. IP адрес принтера может быть найден в настройках через дисплей принтера.

**В**: Это чистый Klipper? Будет обновляться?<br>
**О**: Нет. Anycubic модифицировали прошивку так сильно (переписали на golang), что оно не совместимо с чистым Klipper и не будет обновляться.

**В**: Есть планы перейти на чистый Klipper?<br>
**О**: Нет. Это заняло бы слишком много времени. Опытные пользователи Kobra 3 могут форкнуть эту прошивку и переделать всё на чистый Klipper.

**В**: Как установить аддоны для Klipper?<br>
**О**: Простых способов сделать это не существует.

**В**: Как поблагодарить автора?<br>
**О**: [Boosty](https://boosty.to/ytkab0bp)

## Особенности

- [Python 3.11](https://python.org)
- [Moonraker](https://github.com/Arksine/moonraker) - Modified for Kobra 3 (https://github.com/utkabobr/moonraker/tree/duckpro), emulating Heightmap instead of goklipper, emulating required features that goklipper doesn't support
- [Nginx](https://nginx.org)
- [Mainsail](https://github.com/mainsail-crew/mainsail)
- [fbgrab](https://github.com/GunnarMonell/fbgrab)
- [socat](http://www.dest-unreach.org/socat)
- Восстановлен ADB
- Восстановлен [OpenSSH](https://www.openssh.com) - (`root`:`rockchip`)
- Мелодия At Doom's Gate при установке (Портировано [отсюда](https://github.com/robsoncouto/arduino-songs/blob/master/doom/doom.ino))
- На основе 2.3.2.9

Используйте `/useremain/dist/bin/` для большинства бинарников

## Сборка

Используйте `./create_update.sh`
